window.__require=function e(s,t,a){function r(u,o){if(!t[u]){if(!s[u]){var _=u.split("/");if(_=_[_.length-1],!s[_]){var n="function"==typeof __require&&__require;if(!o&&n)return n(_,!0);if(i)return i(_,!0);throw new Error("Cannot find module '"+u+"'")}u=_}var c=t[u]={exports:{}};s[u][0].call(c.exports,function(e){return r(s[u][1][e]||e)},c,c.exports,e,s,t,a)}return t[u].exports}for(var i="function"==typeof __require&&__require,u=0;u<a.length;u++)r(a[u]);return r}({GameRoom:[function(e,s){"use strict";cc._RF.push(s,"a8ceclld5JJQKRqPdshdVdG","GameRoom");var t,a=(t=e("../common/golbleMgr"))&&t.__esModule?t:{default:t};cc.Class({extends:cc.Component,properties:{roomID:cc.Label,player_info:[cc.Node],player_name:[cc.Label],player_gold:[cc.Label],player_ready:[cc.Node],ready_btn:cc.Node,wan_btn:cc.Node,tiao_btn:cc.Node,tong_btn:cc.Node,zhuang_img:[cc.Node],saizi_img:cc.Node,game_time:cc.Node,game_time_text:cc.Label,play_btn:[cc.Node],play_info:[cc.Node],majiang:cc.Node,wan_sign:[cc.Node],tiao_sign:[cc.Node],tong_sign:[cc.Node],select_sign:[cc.Node],ok_sign:[cc.Node],play_tishi:cc.Node,chupai_tishi:[cc.Node],play_out_card:[cc.Node],out_card_tishi:[cc.Node],last_card_num:cc.Label,game_end:cc.Node,game_userName:cc.Label,game_userMoney:cc.Label,game_score:cc.Label,game_results:[cc.Node],game_info:cc.Label},_auotTime:null,_curTime:0,onLoad:function(){this.roomID.string="\u623f\u95f4\u53f7:"+a.default.userData._roomID},testShowCard:function(){a.default.user_mgr._updateShowCard=!0,a.default.user_mgr._curOutCard_seatID=3,a.default.user_mgr._userList[0]._seatID=0,a.default.user_mgr._userList[0]._showCardInfo._cards.push(210),a.default.user_mgr._userList[0]._showCardInfo._num.push(3),a.default.user_mgr._userList[0]._showCardInfo._type.push(0),a.default.user_mgr._userList[0]._showCardInfo._cards.push(120),a.default.user_mgr._userList[0]._showCardInfo._num.push(4),a.default.user_mgr._userList[0]._showCardInfo._type.push(1),a.default.user_mgr._userList[0]._showCardInfo._cards.push(30),a.default.user_mgr._userList[0]._showCardInfo._num.push(4),a.default.user_mgr._userList[0]._showCardInfo._type.push(2),a.default.user_mgr._userList[1]._seatID=1,a.default.user_mgr._userList[1]._showCardInfo._cards.push(250),a.default.user_mgr._userList[1]._showCardInfo._num.push(3),a.default.user_mgr._userList[1]._showCardInfo._type.push(0),a.default.user_mgr._userList[1]._showCardInfo._cards.push(160),a.default.user_mgr._userList[1]._showCardInfo._num.push(4),a.default.user_mgr._userList[1]._showCardInfo._type.push(1),a.default.user_mgr._userList[1]._showCardInfo._cards.push(30),a.default.user_mgr._userList[1]._showCardInfo._num.push(4),a.default.user_mgr._userList[1]._showCardInfo._type.push(2),a.default.user_mgr._userList[2]._seatID=2,a.default.user_mgr._userList[2]._showCardInfo._cards.push(160),a.default.user_mgr._userList[2]._showCardInfo._num.push(3),a.default.user_mgr._userList[2]._showCardInfo._type.push(1),a.default.user_mgr._userList[2]._showCardInfo._cards.push(260),a.default.user_mgr._userList[2]._showCardInfo._num.push(4),a.default.user_mgr._userList[2]._showCardInfo._type.push(2),a.default.user_mgr._userList[2]._showCardInfo._cards.push(30),a.default.user_mgr._userList[2]._showCardInfo._num.push(4),a.default.user_mgr._userList[2]._showCardInfo._type.push(1),a.default.user_mgr._userList[3]._seatID=3,a.default.user_mgr._userList[3]._showCardInfo._cards.push(160),a.default.user_mgr._userList[3]._showCardInfo._num.push(3),a.default.user_mgr._userList[3]._showCardInfo._type.push(1),a.default.user_mgr._userList[3]._showCardInfo._cards.push(260),a.default.user_mgr._userList[3]._showCardInfo._num.push(4),a.default.user_mgr._userList[3]._showCardInfo._type.push(2),a.default.user_mgr._userList[3]._showCardInfo._cards.push(30),a.default.user_mgr._userList[3]._showCardInfo._num.push(4),a.default.user_mgr._userList[3]._showCardInfo._type.push(1)},updateUserInfo:function(e){console.log("\u73a9\u5bb6\u6570\u91cf:"+e.user_info.length);for(var s=0;s<e.user_info.length;s++){var t=e.user_info[s].id,r=e.user_info[s].name,i=e.user_info[s].gold,u=e.user_info[s].seatID;r==a.default.userData._nickName&&(a.default.userData._seatID=u,1==e.user_info[s].ready&&(this.ready_btn.active=!1)),console.log("\u7528\u6237\u4fe1\u606f:"+t),console.log("\u7528\u6237NAME:"+r),console.log("\u7528\u6237\u91d1\u5e01:"+i),console.log("\u7528\u6237\u4f4d\u7f6e:"+u),a.default.user_mgr._userList[u]._id=t,a.default.user_mgr._userList[u]._name=r,a.default.user_mgr._userList[u]._gold=i,a.default.user_mgr._userList[u]._seatID=u,a.default.user_mgr._userList[u]._ready=e.user_info[s].ready}console.log("\u5f53\u524d\u73a9\u5bb6\u51c6\u5907\u4fe1\u606f"+a.default.userData._ready);for(var o=0;o<this.player_info.length;o++){for(var _=!1,n=a.default.user_mgr.getSeatByID(o),c=0;c<a.default.user_mgr._userList.length;c++)if(a.default.user_mgr._userList[c]._seatID==n){console.log("\u5bf9\u5e94\u4f4d\u7f6e\u6700\u65b0\u4f4d\u7f6e:"+n),this.player_name[o].string=a.default.user_mgr._userList[c]._name,this.player_gold[o].string=a.default.user_mgr._userList[c]._gold,this.player_ready[o].active=a.default.user_mgr._userList[c]._ready,0==a.default.user_mgr._userList[c]._seatID&&(this.play_tishi.angle=90*o-90,console.log("\u6539\u53d8\u89d2\u5ea6:"+o)),this.chupai_tishi[n].active=!0,_=!0;break}this.player_info[o].active=_}},OnClickPass:function(){console.log("\u70b9\u51fb\uff30\uff21\uff33\uff33\u6309\u94ae");for(var e=0;e<this.play_btn.length;e++)this.play_btn[e].active=!1},OnClickXuanQue:function(e,s){console.log("\u73a9\u5bb6\u5b9a\u7f3a:"+s);var t=parseInt(s),r={seatID:a.default.userData._seatID,xuanIdx:t};a.default.messageMgr.sendDingqueMessage(r).then(function(){console.log("\u5b9a\u7f3a\u6210\u529f!"+t)}).catch(function(){console.log("\u5b9a\u7f3a\u5931\u8d25"+t)})},OnClickHuPai:function(){var e=a.default.user_mgr.countScoreInfo();if(console.log("\u80e1\u724c\u4fe1\u606f\uff1a"),console.log(e),console.log(a.default.user_mgr.cardResult._winCardInfo),a.default.user_mgr.cardResult._winCardInfo._wincards.length>0){var s={_seatID:a.default.userData._seatID,_winInfo:e};a.default.messageMgr.sendHuPaiMessage(s)}},OnGangPai:function(){if(console.log("\u8fdb\u884c\u6760\u724c"+a.default.user_mgr.cardResult._gangInfo.length),a.default.user_mgr.cardResult._gangInfo.length>0)if(1==a.default.user_mgr.cardResult._gangInfo.length){var e=a.default.user_mgr.cardResult._gangInfo[0]._cards,s=a.default.user_mgr.testSameCardNum(a.default.userData._seatID,e),t=1;4==s&&(t=2);var r={_seatID:a.default.userData._seatID,_cards:e,_sameNum:s,_type:t};a.default.messageMgr.sendGangPaiMessage(r)}else a.default.user_mgr._IfSelectGangpai=!0,a.default.user_mgr._IfShowGangpaitishi=!0},OnPengPai:function(){if(a.default.user_mgr.cardResult._pengInfo.length>0){var e={_seatID:a.default.userData._seatID,_cards:a.default.user_mgr.cardResult._pengInfo,_type:0};a.default.messageMgr.sendPengPaiMessage(e)}},OnClickReady:function(){var e=a.default.userData._id;console.log("\u73a9\u5bb6\u51c6\u5907\u5f00\u59cb"),a.default.messageMgr.sendReadMessagey(e).then(function(){a.default.userData._ready=!0,console.log("\u51c6\u5907\u6210\u529f!")}).catch(function(){console.log("\u51c6\u5907\u5931\u8d25")})},doTimeEvent:function(){this._status},startTimer:function(){var e=this;this._autoTime=setInterval(function(){e.doTimeEvent(),e._status="sai_zi"},250)},Restart:function(){this.game_end.active=!1,this.game_time_text.node.active=!1,this.last_card_num.node.active=!1,this.wan_btn.active=!1,this.tiao_btn.active=!1,this.tong_btn.active=!1,this.saizi_img.active=!1,this.game_time.active=!1,this.ready_btn.active=!0;for(var e=0;e<4;e++)this.zhuang_img[e].active=!1;for(var s=0;s<this.play_btn.length;s++)this.play_btn[s].active=!1;for(var t=0;t<this.play_info.length;t++)this.play_info[t].active=!1;for(var a=0;a<this.wan_sign.length;a++)this.wan_sign[a].active=!1;for(var r=0;r<this.tiao_sign.length;r++)this.tiao_sign[r].active=!1;for(var i=0;i<this.tong_sign.length;i++)this.tong_sign[i].active=!1;for(var u=0;u<this.select_sign.length;u++)this.select_sign[u].active=!1;for(var o=0;o<this.ok_sign.length;o++)this.ok_sign[o].active=!1;for(var _=0;_<this.chupai_tishi.length;_++)this.chupai_tishi[_].active=!1;for(var n=0;n<this.play_out_card.length;n++)this.play_out_card[n].active=!1,this.out_card_tishi[n].x=this.play_out_card[n].x,this.out_card_tishi[n].y=this.play_out_card[n].y+55,this.out_card_tishi[n].active=!1},start:function(){var e=a.default.userData._roomID;console.log("\u83b7\u5f97\u623f\u95f4\u4fe1\u606f"),a.default.messageMgr.sendGetRoomInfoMessage(e).then(function(){}).catch(function(){console.log("\u83b7\u5f97\u73a9\u5bb6\u4fe1\u606f\u5931\u8d25")}),a.default.soundMgr.stopAll(),a.default.soundMgr.playMusicEX("bgFight"),this.Restart()},update:function(){for(var e=!1,s=0,t=0;t<a.default.messageMgr._msgList.length;t++){if("get_userInfo"==a.default.messageMgr._msgList[t]._type){console.log("\u4fe1\u606f\u5217\u8868:"+a.default.messageMgr._msgList[t]._type),this.updateUserInfo(a.default.messageMgr._msgList[t]._msg),s=t,e=!0;break}if("gang_pai"==a.default.messageMgr._msgList[t]._type){a.default.soundMgr.playFx("gang");for(var r=0;r<this.chupai_tishi.length;r++)this.chupai_tishi[r].active=!1;for(var i=0;i<this.play_btn.length;i++)this.play_btn[i].active=!1;console.log("\u73a9\u5bb6\u6760\u724c"+a.default.messageMgr._msgList[t]._msg._seatID),console.log(a.default.messageMgr._msgList[t]._msg._cards),a.default.user_mgr.eatCard(a.default.messageMgr._msgList[t]._msg),s=t,e=!0;break}if("peng_pai"==a.default.messageMgr._msgList[t]._type){a.default.soundMgr.playFx("peng");for(var u=0;u<this.chupai_tishi.length;u++)this.chupai_tishi[u].active=!1;for(var o=0;o<this.play_btn.length;o++)this.play_btn[o].active=!1;console.log("\u73a9\u5bb6\u78b0\u724c"+a.default.messageMgr._msgList[t]._msg._seatID),console.log(a.default.messageMgr._msgList[t]._msg._cards),a.default.user_mgr.eatCard(a.default.messageMgr._msgList[t]._msg),s=t,e=!0;break}if("chi_pai"==a.default.messageMgr._msgList[t]._type){s=t,e=!0;break}if("show_last_cards"==a.default.messageMgr._msgList[t]._type){var _=a.default.messageMgr._msgList[t]._msg;console.log("\u663e\u793a\u6700\u540e\u7684\u6392"),console.log(_);for(var n=0;n<a.default.user_mgr._userList.length;n++){var c=a.default.user_mgr._userList[n]._seatID;if(console.log("\u66f4\u65b0\u5269\u4f59\u5f53\u524d\u4fe1\u606f"+a.default.user_mgr._userList[n]._seatID),c!=a.default.userData._seatID)for(var d=0;d<_._seatIDs.length;d++)console.log("\u66f4\u65b0\u724c\u4f4d\u7f6e:"+_._seatIDs[d]),_._seatIDs[d]==c&&(0==d?a.default.user_mgr._userList[n]._cards=_._cards_1:1==d?a.default.user_mgr._userList[n]._cards=_._cards_2:2==d?a.default.user_mgr._userList[n]._cards=_._cards_3:3==d&&(a.default.user_mgr._userList[n]._cards=_._cards_4),console.log("\u5269\u4f59\u724c:"+_._seatIDs[d]),console.log(a.default.user_mgr._userList[n]._cards))}a.default.user_mgr._statusList.push("updata_last_cards"),s=t,e=!0;break}if("hu_pai"==a.default.messageMgr._msgList[t]._type){console.log("\u80e1\u724c\u4fe1\u606f:"),console.log(a.default.messageMgr._msgList[t]._msg),this.game_end.active=!0;for(var l=a.default.messageMgr._msgList[t]._msg,g=0;g<this.game_results.length;g++)this.game_results[g].active=!1;l._seatID==a.default.userData._seatID?(this.game_results[0].active=!0,this.game_info.string=l._winInfo._info,this.game_score.string="+"+3*l._winInfo._score,a.default.userData._money+=3*l._winInfo._score):(this.game_results[3].active=!0,this.game_info.string=l._winInfo._info,this.game_score.string="-"+l._winInfo._score,a.default.userData._money-=l._winInfo._score),this.game_userName.string=a.default.userData._nickName,this.game_userMoney.string=""+a.default.userData._money,s=t,e=!0;break}if("wait_player_check"==a.default.messageMgr._msgList[t]._type){s=t,e=!0;break}if("send_card"==a.default.messageMgr._msgList[t]._type){console.log("\u83b7\u5f97\u724c\u4fe1\u606f:"+a.default.messageMgr._msgList[t]._msg);for(var h=a.default.messageMgr._msgList[t]._msg,f=0;f<a.default.user_mgr._userList.length;f++)if(a.default.user_mgr._userList[f]._seatID==h._seatID){if(a.default.user_mgr._userList[f]._cards.push(h._card),console.log("\u589e\u52a0\u624b\u724c\u6210\u529f"),console.log(a.default.user_mgr._userList[f]._cards),console.log("\u624b\u724c\u6570\u91cf"+a.default.user_mgr._userList[f]._cards.length),a.default.userData._seatID==h._seatID){var m=a.default.user_mgr.coutPlayerCard();console.log("\u83b7\u5f97\u724c\u540e\u8ba1\u7b97\u7ed3\u679c:"),console.log(m),m.bwin&&(this.play_btn[3].active=!0),m.bgang&&(this.play_btn[2].active=!0),m.bpass&&(this.play_btn[0].active=!0)}break}a.default.user_mgr._IfoutCardtishi=!0,this.last_card_num.node.active=!0,this.last_card_num.string="\u5269\u4e0b"+h._num+"\u5f20\u724c",a.default.user_mgr._curOutCard_seatID=h._seatID,a.default.user_mgr._curxuanpai_seatID=h._seatID,a.default.user_mgr._statusList.push("update_cards");for(var p=0;p<4;p++)this.select_sign[p].active=!1,this.ok_sign[p].active=!1;for(var v=0;v<this.chupai_tishi.length;v++)v==h._seatID?this.chupai_tishi[v].active=!0:this.chupai_tishi[v].active=!1;a.default.userData._seatID!=h._seatID?a.default.user_mgr._IfChupai=!1:a.default.user_mgr._IfChupai=!0,s=t,e=!0;break}if("xuan_que"==a.default.messageMgr._msgList[t]._type){console.log("\u9009\u5e84\u4fe1\u606f:"+a.default.messageMgr._msgList[t]._type),this.wan_btn.active=!0,this.tiao_btn.active=!0,this.tong_btn.active=!0;for(var L=0;L<this.chupai_tishi.length;L++)this.chupai_tishi[L].active=!0;for(var I=0;I<this.select_sign.length;I++)this.select_sign[I].active=!0;a.default.user_mgr.SortPlayerCard(),a.default.user_mgr._statusList.push("update_all_cards"),s=t,e=!0;break}if("ding_que_time"==a.default.messageMgr._msgList[t]._type){this.game_time.active=!0,a.default.messageMgr._msgList[t]._msg<10?this.game_time_text.string="0"+a.default.messageMgr._msgList[t]._msg:this.game_time_text.string=a.default.messageMgr._msgList[t]._msg+"",s=t,e=!0;break}if("xuan_pai_time"==a.default.messageMgr._msgList[t]._type){this.game_time.active=!0,a.default.messageMgr._msgList[t]._msg<10?this.game_time_text.string="0"+a.default.messageMgr._msgList[t]._msg:this.game_time_text.string=a.default.messageMgr._msgList[t]._msg+"",s=t,e=!0;break}if("xuan_pai"==a.default.messageMgr._msgList[t]._type){console.log("\u9009\u724c\u4f4d\u7f6e\u4fe1\u606f:"),console.log(a.default.messageMgr._msgList[t]._msg);var C=a.default.messageMgr._msgList[t]._msg;a.default.user_mgr._curxuanpai_seatID=C._seatID,this.last_card_num.node.active=!0,this.last_card_num.string="\u5269\u4e0b"+C._num+"\u5f20\u724c";for(var y=0;y<4;y++)this.select_sign[y].active=!1,this.ok_sign[y].active=!1;for(var w=0;w<this.chupai_tishi.length;w++)w==C._seatID?this.chupai_tishi[w].active=!0:this.chupai_tishi[w].active=!1;if(a.default.userData._seatID==C._seatID){a.default.user_mgr._IfChupai=!0,console.log("\u8ba1\u7b97\u624b\u724c\u4fe1\u606f");var b=a.default.user_mgr.coutPlayerCard();b.ifWin&&(this.play_btn[3].active=!0),b.bgang&&(this.play_btn[2].active=!0),b.ifpass&&(this.play_btn[0].active=!0)}else a.default.user_mgr._IfChupai=!1;s=t,e=!0;break}if("sai_zi"==a.default.messageMgr._msgList[t]._type){console.log("\u7b5b\u5b50\u4fe1\u606f:"+a.default.messageMgr._msgList[t]._msg);for(var M=0;M<this.player_ready.length;M++)this.player_ready[M].active=!1;this.saizi_img.active=!0,s=t,e=!0;break}if("zhuang_jia"==a.default.messageMgr._msgList[t]._type){console.log("\u5e84\u5bb6\u4fe1\u606f:"+a.default.messageMgr._msgList[t]._msg),a.default.user_mgr._zhuang=a.default.messageMgr._msgList[t]._msg;for(var D=0;D<this.zhuang_img.length;D++){var S=a.default.user_mgr.getSeatByID(D);a.default.user_mgr._userList[D]._seatID==a.default.user_mgr._zhuang?this.zhuang_img[S].active=!0:this.zhuang_img[S].active=!1}this.saizi_img.active=!1,a.default.user_mgr._status="wait_deal_card",s=t,e=!0;break}if("ding_que"==a.default.messageMgr._msgList[t]._type){var k=a.default.messageMgr._msgList[t]._msg;console.log("\u5b9a\u7f3a\u4fe1\u606f\u5ea7\u4f4d:"+k.seatID+"\u5b9a\u7f3a\u724c\u4fe1\u606f:"+k.xuanIdx);for(var N=0;N<a.default.user_mgr._userList.length;N++)if(console.log("\u5ea7\u4f4d\u4fe1\u606f"+a.default.user_mgr._userList[N]._seatID),a.default.user_mgr._userList[N]._seatID==k.seatID){console.log("\u6709\u9009\u7f3a\u4f4d\u7f6e"+a.default.user_mgr._userList[N]._seatID),a.default.user_mgr._userList[N]._dingque=k.xuanIdx;for(var x=0;x<4;x++)if(a.default.user_mgr.getSeatByID(x)==k.seatID){switch(console.log("\u5bf9\u5e94\u4f4d\u7f6e\u8bbe\u7f6e"+k.xuanIdx+x),a.default.userData._seatID==k.seatID&&(this.wan_btn.active=!1,this.tiao_btn.active=!1,this.tong_btn.active=!1),this.select_sign[x].active=!1,this.ok_sign[x].active=!0,this.chupai_tishi[k.seatID].active=!1,k.xuanIdx){case 1:this.wan_sign[x].active=!0;break;case 0:this.tiao_sign[x].active=!0;break;case 2:this.tong_sign[x].active=!0}break}break}s=t,e=!0;break}if("out_card"==a.default.messageMgr._msgList[t]._type){for(var R=0;R<this.chupai_tishi.length;R++)this.chupai_tishi[R].active=!1;for(var P=0;P<this.play_btn.length;P++)this.play_btn[P].active=!1;var F=a.default.messageMgr._msgList[t]._msg;console.log("\u51fa\u724c\u4fe1\u606f:"),console.log(F),a.default.user_mgr._curOutCard_seatID=F.seatID,a.default.user_mgr._curLastOutCard=F.card;var B=a.default.user_mgr.getCardInfo(F.card);a.default.soundMgr.playFx(""+B),a.default.user_mgr.Delcard(F.seatID,F.card,F.num);for(var E=0;E<this.play_out_card.length;E++)if(a.default.user_mgr.getSeatByID(E)==F.seatID){this.play_out_card[E].active=!0,this.out_card_tishi[E].active=!0;var O=a.default.user_mgr.getCardName(F.card)+a.default.user_mgr.getCardNum(F.card);console.log("\u724c"+F.card+"\u724c\u7684\u4f4d\u7f6e"+O),a.default.user_mgr.loadImg(this.play_out_card[E],a.default.user_mgr.getMajiangPath(),O)}else this.out_card_tishi[E].active=!1;if(a.default.user_mgr.SortPlayerCard(),a.default.user_mgr._statusList.push("update_cards"),a.default.userData._seatID!=F.seatID){var T=a.default.user_mgr.countOtherCard(F.card);1==T.ifPeng&&(this.play_btn[1].active=!0),1==T.bwin&&(this.play_btn[3].active=!0),1==T.bgang&&(this.play_btn[2].active=!0),1==T.bpass&&(this.play_btn[0].active=!0)}s=t,e=!0;break}if("deal_card"==a.default.messageMgr._msgList[t]._type){console.log("\u53d1\u724c\u4fe1\u606f:"+a.default.messageMgr._msgList[t]._msg);for(var U=a.default.messageMgr._msgList[t]._msg,j=0;j<a.default.user_mgr._userList.length;j++)if(a.default.user_mgr._userList[j]._seatID==a.default.userData._seatID){a.default.user_mgr._userList[j]._cards=[];for(var q=0;q<U.length;q++)a.default.user_mgr._userList[j]._cards.push(U[q]);console.log("\u73a9\u5bb6\u624b\u724c:"+a.default.user_mgr._userList[j]._cards)}else{if(a.default.user_mgr._userList[j]._cards=[],a.default.user_mgr._userList[j]._seatID==a.default.user_mgr._zhuang){a.default.user_mgr._userList[j]._cards=[];for(var G=0;G<14;G++)a.default.user_mgr._userList[j]._cards.push(0)}else{a.default.user_mgr._userList[j]._cards=[];for(var J=0;J<13;J++)a.default.user_mgr._userList[j]._cards.push(0)}console.log("\u53d1\u724c\u4f4d\u7f6e:"+a.default.user_mgr._userList[j]._seatID),console.log("\u53d1\u724c\u540e\u624b\u724c\u957f\u5ea6:"+a.default.user_mgr._userList[j]._cards.length),console.log(a.default.user_mgr._userList[j]._cards)}a.default.user_mgr._statusList.push("deal_card"),s=t,e=!0;break}console.log("gameroom\u672a\u5904\u7406\u4fe1\u606f:"+a.default.messageMgr._msgList[t]._type)}e&&a.default.messageMgr._msgList.splice(s,1)}}),cc._RF.pop()},{"../common/golbleMgr":"golbleMgr"}],MajiangMgr:[function(e,s){"use strict";cc._RF.push(s,"58d0f9xOOtHsoLNXRits5Um","MajiangMgr");var t,a=(t=e("../common/golbleMgr"))&&t.__esModule?t:{default:t};cc.Class({extends:cc.Component,properties:{up_cards:[cc.Node],left_cards:[cc.Node],right_cards:[cc.Node],player_cards:[cc.Node],out_cards:[cc.Node],cards_pos:[cc.Node],cards_tishi:[cc.Node]},_curSelCardIdx:void 0,_curTime:0,getShowCardPath:function(e){var s="";switch(e){case 0:s="textures/MJ/bottom/Z_bottom";break;case 1:s="textures/MJ/right/Z_right";break;case 2:s="textures/MJ/bottom/Z_bottom";break;case 3:s="textures/MJ/left/Z_left"}return s},getCardEmptyName:function(e){var s="";switch(e){case 0:s="e_mj_v";break;case 1:s="e_mj_right";break;case 2:s="e_mj_up";break;case 3:s="e_mj_left"}return s},getShowCard:function(e,s){var t="";switch(e){case 0:t=this.getCardShowD(s);break;case 1:t=this.getCardShowR(s);break;case 2:t=this.getCardShowU(s);break;case 3:t=this.getCardShowL(s)}return t},getCardShowR:function(e){var s=Math.floor(e/100);return 0==s?"R_bamboo_":1==s?"R_character_":"R_dot_"},getCardShowL:function(e){var s=Math.floor(e/100);return 0==s?"L_bamboo_":1==s?"L_character_":"L_dot_"},getCardShowU:function(e){var s=Math.floor(e/100);return 0==s?"B_bamboo_":1==s?"B_character_":"B_dot_"},getCardShowD:function(e){var s=Math.floor(e/100);return s=Math.floor(s),console.log("\u5361\u724c\u7c7b\u578b"+s),0==s?"B_bamboo_":1==s?"B_character_":"B_dot_"},updaetCardPosBySeatID:function(e){console.log("\u66f4\u65b0\u724c\u7684\u4f4d\u7f6e"+e);for(var s=0;s<4;s++)if(a.default.user_mgr.getSeatByID(s)==e){var t=a.default.user_mgr.getUserCardBySeat(e);if(console.log("\u66f4\u65b0\u724c\u7684\u5185\u5bb9:"+t),console.log("\u66f4\u65b0\u724c\u7684\u957f\u5ea6:"+t.length),e==a.default.userData._seatID)for(var r=0;r<this.player_cards.length;r++)if(r<t.length){var i=t[r],u=a.default.user_mgr.getCardName(i)+a.default.user_mgr.getCardNum(i);console.log("\u724c"+i+"\u724c\u7684\u4f4d\u7f6e"+u),a.default.user_mgr.loadImg(this.player_cards[r],a.default.user_mgr.getMajiangPath(),u),this.player_cards[r].active=!0}else this.player_cards[r].active=!1;else if(console.log("\u66f4\u65b0\u724c\u7684\u4f4d\u7f6e"+s+"\u724c\u4f4d\u7f6e"+e+"\u5f53\u524d\u73a9\u5bb6\u4f4d\u7f6e"+a.default.userData._seatID),1==s)for(var o=0;o<this.right_cards.length;o++)o<t.length?this.right_cards[o].active=!0:this.right_cards[o].active=!1;else if(2==s)for(var _=0;_<this.up_cards.length;_++)_<t.length?this.up_cards[_].active=!0:this.up_cards[_].active=!1;else if(3==s)for(var n=0;n<this.left_cards.length;n++)n<t.length?this.left_cards[this.left_cards.length-1-n].active=!0:this.left_cards[this.left_cards.length-1-n].active=!1;break}},updateCardPos:function(){for(var e=0;e<a.default.user_mgr._userList.length;e++)this.updaetCardPosBySeatID(a.default.user_mgr._userList[e]._seatID)},OnClickOutCard:function(e,s){console.log("\u51fa\u724c\u53c2\u6570"+s);var t=s;if(t=Math.floor(t),console.log("\u51fa\u724c\u7d22\u5f15"+t),1!=a.default.user_mgr._IfSelectGangpai){if(this._curSelCardIdx!=t)return this.player_cards[t].y+=50,-1!=this._curSelCardIdx&&(this.player_cards[this._curSelCardIdx].y-=50),void(this._curSelCardIdx=t);this.player_cards[t].y-=50,this._curSelCardIdx=-1,0!=a.default.user_mgr._IfChupai&&a.default.userData._seatID==a.default.user_mgr._curxuanpai_seatID&&a.default.user_mgr.outCard(t)}else{if(a.default.user_mgr.cardResult._gangInfo.length<0)return void console.log("\u51fa\u73b0\u9519\u8bef\uff0c\u6ca1\u6709\u6760\u724c\u4fe1\u606f");console.log("\u5f53\u524d\u4e3a\u9009\u62e9\u4e0d\u540c\u6760\u724c"),a.default.user_mgr._IfSelectGangpai=!1;for(var r=a.default.user_mgr.getUserCardBySeat(a.default.userData._seatID),i=0;i<this.cards_tishi.length;i++)this.cards_tishi[i].active=!1;for(var u=0;u<a.default.user_mgr.cardResult._gangInfo.length;u++)for(var o=0;o<a.default.user_mgr.cardResult._gangInfo[u]._cards.length;o++)if(a.default.user_mgr.cardResult._gangInfo[u]._cards[o]==r[t]){var _=a.default.user_mgr.cardResult._gangInfo[u]._cards,n=a.default.user_mgr.testSameCardNum(a.default.userData._seatID,_),c=1;4==n&&(c=2);var d=a.default.user_mgr.getUserCardBySeat(a.default.userData._seatI),l={_seatID:a.default.userData._seatID,_cards:_,_sameNum:n,_type:c,_num:d.length};return void a.default.messageMgr.sendGangPaiMessage(l)}}},restart:function(){this._curSelCardIdx=-1;for(var e=0;e<this.up_cards.length;e++)this.up_cards[e].active=!1,this.left_cards[e].active=!1,this.right_cards[e].active=!1,this.player_cards[e].active=!1;for(var s=0;s<this.out_cards.length;s++)this.out_cards[s].active=!1;this.up_cards[2].worldPosition;for(var t=0;t<this.up_cards.length;t++)this.up_cards[t].y=this.cards_pos[2].y,this.up_cards[t].x=this.cards_pos[2].x+36*t;for(var a=this.left_cards.length-1;a>=0;a--)this.left_cards[a].y=this.cards_pos[3].y+28*(this.left_cards.length-a-1),this.left_cards[a].x=this.cards_pos[3].x;for(var r=0;r<this.right_cards.length;r++)this.right_cards[r].y=this.cards_pos[1].y-28*r,this.right_cards[r].x=this.cards_pos[1].x;for(var i=0;i<this.player_cards.length;i++)this.player_cards[i].y=this.cards_pos[0].y,this.player_cards[i].x=this.cards_pos[0].x-75*i,this.cards_tishi[i].x=this.cards_pos[0].x-75*i,this.cards_tishi[i].y=this.cards_pos[0].y+98,this.cards_tishi[i].active=!1},start:function(){this.restart()},showCard:function(e){if(e<3)for(var s=4*e;s<4*e+4;s++)this.up_cards[s].active=!0,this.left_cards[s].active=!0,this.right_cards[s].active=!0,this.player_cards[s].active=!0;else if(3==e){this.up_cards[12].active=!0,this.left_cards[12].active=!0,this.right_cards[12].active=!0,this.player_cards[12].active=!0;for(var t=0;t<4;t++)if(a.default.user_mgr.getSeatByID(t)==a.default.user_mgr._zhuang)switch(t){case 0:this.player_cards[13].active=!0;break;case 1:this.right_cards[13].active=!0;break;case 2:this.up_cards[13].active=!0;break;case 3:this.left_cards[13].active=!0}}},doTimeEvent:function(){switch(a.default.user_mgr._satus){case"wait_deal_card":this._curTime=0;break;case"deal_card":if(this._curTime<250){var e=a.default.user_mgr.getUserCard();console.log("\u73a9\u5bb6\u624b\u724c:"+e);for(var s=0;s<e.length;s++){var t=e[s],r=a.default.user_mgr.getCardName(t)+a.default.user_mgr.getCardNum(t);console.log("\u724c"+t+"\u724c\u7684\u4f4d\u7f6e"+r),a.default.user_mgr.loadImg(this.player_cards[s],a.default.user_mgr.getMajiangPath(),r)}this.showCard(0)}else this._curTime<500?this.showCard(1):this._curTime<750?this.showCard(2):this._curTime<1e3?(this.showCard(3),a.default.user_mgr._satus="wait_fa_pai",a.default.user_mgr._statusList.push("update_cards")):a.default.user_mgr._satus="wait_fa_pai";this._curTime+=250}},updataAllOtherCards:function(){for(var e=0;e<4;e++)this.updataOtherHandCard(e)},updataOtherHandCard:function(e){if(e!=a.default.userData._seatID)for(var s=a.default.user_mgr.getUserCardBySeat(e),t=0;t<4;t++)if(a.default.user_mgr.getSeatByID(t)==e){if(1==t)for(var r=0;r<this.right_cards.length;r++)this.right_cards[r].active=!1;else if(2==t)for(var i=0;i<this.up_cards.length;i++)this.up_cards[i].active=!1;else if(3==t)for(var u=0;u<this.left_cards.length;u++)this.left_cards[u].active=!1;for(var o=t,_="",n=0;n<s.length;n++){if(1==t)0==s[n]?(_=this.getCardEmptyName(o),a.default.user_mgr.loadImg(this.right_cards[n],"textures/MJ/mjEmpty",_)):(_=this.getShowCard(o,s[n])+a.default.user_mgr.getCardNum(s[n]),a.default.user_mgr.loadImg(this.right_cards[n],this.getShowCardPath(o),_)),this.right_cards[n].active=!0;else if(2==t)0==s[n]?(_=this.getCardEmptyName(o),a.default.user_mgr.loadImg(this.up_cards[n],"textures/MJ/mjEmpty",_),this.up_cards[n].scale=1):(_=this.getShowCard(o,s[n])+a.default.user_mgr.getCardNum(s[n]),a.default.user_mgr.loadImg(this.up_cards[n],this.getShowCardPath(o),_),this.up_cards[n].scale=.7),this.up_cards[n].active=!0;else if(3==t){var c=this.left_cards.length-1;0==s[n]?(_=this.getCardEmptyName(o),a.default.user_mgr.loadImg(this.left_cards[c-n],"textures/MJ/mjEmpty",_)):(_=this.getShowCard(o,s[n])+a.default.user_mgr.getCardNum(s[n]),a.default.user_mgr.loadImg(this.left_cards[c-n],this.getShowCardPath(o),_)),this.left_cards[c-n].active=!0}console.log("\u663e\u793a\u724c"+_+"\u724c\u7684\u6570\u76ee"+s[n])}}},startTimer:function(){var e=this;this._autoTime=setInterval(function(){e.doTimeEvent()},250)},update:function(){1==a.default.user_mgr._IfoutCardtishi&&(a.default.user_mgr._IfoutCardtishi=!1,this.cards_tishi[0].active=!0),console.log("\u72b6\u6001\u4e2a\u6570:"+a.default.user_mgr._statusList.length);for(var e=0,s=!1;e<a.default.user_mgr._statusList.length;e++){switch(console.log("\u72b6\u6001:"+a.default.user_mgr._statusList[e]),a.default.user_mgr._statusList[e]){case"deal_card":this._curTime=0,a.default.user_mgr._satus="deal_card",this.startTimer(),s=!0;break;case"update_cards":this.updaetCardPosBySeatID(a.default.user_mgr._curOutCard_seatID),s=!0;break;case"update_all_cards":this.updateCardPos(),s=!0;break;case"updata_last_cards":this.updataAllOtherCards(),s=!0}if(1==s)break}if(s&&a.default.user_mgr._statusList.splice(e,1),1==a.default.user_mgr._IfShowGangpaitishi){this.updaetCardPosBySeatID(a.default.userData._seatID),console.log("\u663e\u793a\u53ef\u4ee5\u8fdb\u884cgang\u7684\u724c\u7684\u63d0\u793a"),a.default.user_mgr._IfShowGangpaitishi=!1;for(var t=a.default.user_mgr.getUserCardBySeat(a.default.userData._seatID),r=0;r<this.cards_tishi.length;r++)this.cards_tishi[r].active=!1;for(var i=0;i<a.default.user_mgr.cardResult._gangInfo.length;i++){var u=a.default.user_mgr.cardResult._gangInfo[i];console.log("\u53ef\u4ee5\u6760\u7684\u724c"),console.log(u._cards),console.log(t);for(var o=0;o<u._cards.length;o++)for(var _=0;_<t.length;_++)if(t[_]==u._cards[o]){this.cards_tishi[_].active=!0,console.log("\u63d0\u793a\u6807\u8bb0\uff29\uff24"+_+"\u724c"+t[_]);break}}}}}),cc._RF.pop()},{"../common/golbleMgr":"golbleMgr"}],ShowCardMgr:[function(e,s){"use strict";cc._RF.push(s,"e4e08c4mlNAeY01UpFF14i+","ShowCardMgr");var t,a=(t=e("../common/golbleMgr"))&&t.__esModule?t:{default:t},r="textures/MJ/bottom/Z_bottom";cc.Class({extends:cc.Component,properties:{showcard_pos:[cc.Node],show_player_card:[cc.Node],show_right_card:[cc.Node],show_up_card:[cc.Node],show_left_card:[cc.Node]},getShowCardPath:function(e){var s="";switch(e){case 0:s=r;break;case 1:s="textures/MJ/right/Z_right";break;case 2:s=r;break;case 3:s="textures/MJ/left/Z_left"}return s},getCardEmptyName:function(e){var s="";switch(e){case 0:s="e_mj_b_bottom";break;case 1:s="e_mj_b_right";break;case 2:s="e_mj_b_up";break;case 3:s="e_mj_b_left"}return s},getCardShowR:function(e){var s=Math.floor(e/100);return 0==s?"R_bamboo_":1==s?"R_character_":"R_dot_"},getCardShowL:function(e){var s=Math.floor(e/100);return 0==s?"L_bamboo_":1==s?"L_character_":"L_dot_"},getCardShowU:function(e){var s=Math.floor(e/100);return 0==s?"B_bamboo_":1==s?"B_character_":"B_dot_"},getCardShowD:function(e){var s=Math.floor(e/100);return s=Math.floor(s),console.log("\u5361\u724c\u7c7b\u578b"+s),0==s?"B_bamboo_":1==s?"B_character_":"B_dot_"},getShowCard:function(e,s){var t="";switch(e){case 0:t=this.getCardShowD(s);break;case 1:t=this.getCardShowR(s);break;case 2:t=this.getCardShowU(s);break;case 3:t=this.getCardShowL(s)}return t},start:function(){this.reSet()},reSet:function(){for(var e=0;e<this.show_player_card.length;e++)this.show_player_card[e].active=!1;for(var s=0;s<this.show_left_card.length;s++)this.show_left_card[s].active=!1;for(var t=0;t<this.show_right_card.length;t++)this.show_right_card[t].active=!1;for(var a=0;a<this.show_up_card.length;a++)this.show_up_card[a].active=!1;for(var r=0;r<this.show_up_card.length/2;r++){var i=this.show_up_card[r];this.show_up_card[r]=this.show_up_card[this.show_up_card.length-1-r],this.show_up_card[this.show_up_card.length-1-r]=i}},ShowFinishCard:function(){var e=a.default.user_mgr._curOutCard_seatID;console.log("\u663e\u793a\u5bf9\u5e94\u4f4d\u7f6e\u624b\u724c"+e);for(var s=0,t=!1;s<a.default.user_mgr._userList.length;s++)if(a.default.user_mgr._userList[s]._seatID==e){t=!0;break}if(0!=t){var i=a.default.user_mgr._userList[s]._showCardInfo;console.log("\u4fe1\u606f"+i._cards.length);for(var u=99,o=0;o<4;o++)if(a.default.user_mgr.getSeatByID(o)==e){u=o;break}if(99!=u){console.log("\u663e\u793a\u7d22\u5f15"+u);for(var _=0,n=0;n<i._cards.length;n++){console.log("\u73a9\u5bb6\u5403\u724c:"+i._cards[n]),console.log("\u73a9\u5bb6\u5403\u724c\u6570\u91cf:"+i._num[n]),console.log("\u73a9\u5bb6\u5403\u724c\u7c7b\u578b:"+i._type[n]),i[n];for(var c=i._cards[n],d=i._num[n],l=i._type[n],g=0;g<d;g++){var h="";switch(u){case 0:2!=g&&0!=g&&1!=g||2!=l?(h=this.getShowCard(u,c)+a.default.user_mgr.getCardNum(c),a.default.user_mgr.loadImg(this.show_player_card[_+g],this.getShowCardPath(u),h)):(h="e_mj_b_up",a.default.user_mgr.loadImg(this.show_player_card[_+g],r,h));var f=this.showcard_pos[u].x-15-120+52*(g+3*n)-868+5*n;3==g?(this.show_player_card[_+g].x=f-104,this.show_player_card[_+g].y=this.showcard_pos[u].y+22):(this.show_player_card[_+g].x=f,this.show_player_card[_+g].y=this.showcard_pos[u].y),this.show_player_card[_+g].active=!0;break;case 1:2!=g&&3!=g&&1!=g||2!=l?(h=this.getShowCard(u,c)+a.default.user_mgr.getCardNum(c),a.default.user_mgr.loadImg(this.show_right_card[_+g],this.getShowCardPath(u),h)):(h=this.getCardEmptyName(u),a.default.user_mgr.loadImg(this.show_right_card[_+g],"textures/MJ/mjEmpty",h));var m=this.showcard_pos[u].y-15+28*(g+3*n)-392+5*n;this.show_right_card[_+g].active=!0,0==l?(this.show_right_card[_+g].x=this.showcard_pos[u].x,this.show_right_card[_+g].y=m):0==g?(this.show_right_card[_+g].x=this.showcard_pos[u].x+5,this.show_right_card[_+g].y=m+28+10):(this.show_right_card[_+g].x=this.showcard_pos[u].x,this.show_right_card[_+g].y=m-28);break;case 2:2!=g&&0!=g&&1!=g||2!=l?(h=this.getShowCard(u,c)+a.default.user_mgr.getCardNum(c),a.default.user_mgr.loadImg(this.show_up_card[_+g],this.getShowCardPath(u),h),this.show_up_card[_+g].scale=.7):(h=this.getCardEmptyName(u),a.default.user_mgr.loadImg(this.show_up_card[_+g],"textures/MJ/mjEmpty",h),this.show_up_card[_+g].scale=1);var p=this.showcard_pos[u].x+15-38*(g+3*n)+532-5*n;3==g?(this.show_up_card[_+g].x=p+76,this.show_up_card[_+g].y=this.showcard_pos[u].y+16):(this.show_up_card[_+g].x=p,this.show_up_card[_+g].y=this.showcard_pos[u].y),this.show_up_card[_+g].active=!0;break;case 3:2!=g&&0!=g&&1!=g||2!=l?(h=this.getShowCard(u,c)+a.default.user_mgr.getCardNum(c),a.default.user_mgr.loadImg(this.show_left_card[_+g],this.getShowCardPath(u),h)):(h=this.getCardEmptyName(u),a.default.user_mgr.loadImg(this.show_left_card[_+g],"textures/MJ/mjEmpty",h));var v=this.showcard_pos[u].y+15-28*(g+3*n)+392+5*n;3==g?(this.show_left_card[_+g].x=this.showcard_pos[u].x-5,this.show_left_card[_+g].y=v+56+10):(this.show_left_card[_+g].x=this.showcard_pos[u].x,this.show_left_card[_+g].y=v),this.show_left_card[_+g].active=!0}console.log("\u663e\u793a\u724c:"+c+"\u724c\u7684\u540d\u5b57"+h+"\u4f4d\u7f6e:"+u)}_+=d}}else console.log("\u663e\u793a\u724c\u4f4d\u7f6e\u4fe1\u606f\u9519\u8bef")}else console.log("\u6ca1\u6709\u627e\u5230\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u73a9\u5bb6"+e)},update:function(){1==a.default.user_mgr._updateShowCard&&(console.log("\u66f4\u65b0\u684c\u9762\u4fe1\u606f"),this.ShowFinishCard(),a.default.user_mgr._updateShowCard=!1)}}),cc._RF.pop()},{"../common/golbleMgr":"golbleMgr"}],SoundMgr:[function(e,s,t){"use strict";cc._RF.push(s,"c732cyqz1ZIWZ2DOLz0hAVf","SoundMgr"),t.__esModule=!0,t.default=void 0;var a=function(){function e(){this._music=null,this._soundList=[],this._bMusic=!0,this._MusicVol=.6,this._bFx=!0,this._FxVol=1,this._bLoaded=!1}e.getInstance=function(){return e.instance?e.instance:(e.instance=new e,e.instance)};var s=e.prototype;return s.playMusicEX=function(e){console.log("\u64ad\u653e\u80cc\u666f\u97f3\u4e50"+e);var s=this.getClipByname(e);null!=s?this._bMusic&&(this.music=cc.audioEngine.play(s,!0,this._MusicVol)):console.log("\u6ca1\u6709\u627e\u5230\u97f3\u4e50"+e)},s.playFx=function(e){var s=this.getClipByname(e);null!=s&&this._bFx&&cc.audioEngine.play(s,!1,this._FxVol)},s.stopAll=function(){cc.audioEngine.stopAll()},s.stopMusic=function(){cc.audioEngine.stop(this.music)},s.updateMusic=function(){},s.addSound=function(e,s){console.log("\u540d\u5b57:"+e);var t={_name:e,_clip:s};this._soundList.push(t)},s.getClipByname=function(e){console.log("\u67e5\u627e\u6587\u4ef6:"+e);for(var s=0;s<this._soundList.length;s++)if(this._soundList[s]._name==e)return this._soundList[s]._clip;return null},s.LoadSound=function(){this._soundList=[],cc.loader.loadResDir("sounds",cc.AudioClip,function(e,s){console.log("load clips:",s),e&&console.log("err:",e);for(var t=0;t<s.length;t++){var a={_name:s[t]._name,_clip:s[t]};this._soundList.push(a)}console.log("\u52a0\u8f7d\u6210\u529f"),console.log(this._soundList),this._bLoaded=!0})},e}();t.default=a,s.exports=t.default,cc._RF.pop()},{}],UserInfo:[function(e,s){"use strict";cc._RF.push(s,"72989I/oP1L0JthcbvCiwvX","UserInfo");var t=a(e("../common/golbleMgr"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("../common/userMgr")),cc.Class({extends:cc.Component,properties:{seatdID:0,userName:cc.Label,money:cc.Label},onEnable:function(){var e=t.default.userData._seatID;console.log("\u4f4d\u7f6e\u4fe1\u606f:"+e);var s=t.default.user_mgr.getSeatByID(this.seatdID);console.log("\u6700\u65b0\u4f4d\u7f6e:"+s),console.log("\u623f\u95f4\u73a9\u5bb6\u6570\u91cf:"+t.default.user_mgr._userList.length);for(var a=0;a<t.default.user_mgr._userList.length;a++)if(t.default.user_mgr._userList[a]._seatID==s)return console.log("\u5bf9\u5e94\u4f4d\u7f6e\u6700\u65b0\u4f4d\u7f6e:"+a),this.node.active=!0,this.userName.string=t.default.user_mgr._userList[a]._name,void(this.money.string=t.default.user_mgr._userList[a]._gold);this.node.active=!1},start:function(){}}),cc._RF.pop()},{"../common/golbleMgr":"golbleMgr","../common/userMgr":"userMgr"}],coutCard:[function(e,s,t){"use strict";cc._RF.push(s,"bb9e4k2/jJAZbLnoQlXQvSi","coutCard"),t.__esModule=!0,t.default=void 0;var a=function(){this._cards=[],this._num=0,this._type=0},r=function(){this._wincards=[]},i=function(){function e(){this._saveCardID=[],this._winType=0,this._winCardInfo=new r,this._cardInfo=[],this._gangInfo=[],this._pengInfo=[]}var s=e.prototype;return s.testThreeCard=function(e){var s=e.length;if(3==s||6==s||9==s||12==s){var t=this.getCardNum(e[0]),r=this.getCardNum(e[1]),i=this.getCardNum(e[2]);if(console.log("\u6bd4\u8f83\u7684\u724c"+t+r+i),t==r&&t==i){var u=[],o=new a;if(o._cards.push(e[0]),o._cards.push(e[1]),o._cards.push(e[2]),o._num=3,o._type=2,this._cardInfo.push(o),3==e.length)return!0;for(var _=3;_<e.length;_++)u.push(e[_]);return this.testThreeCard(u)}if(t+1==r&&t+2==i){var n=new a;n._cards.push(e[0]),n._cards.push(e[1]),n._cards.push(e[2]),n._num=3,n._type=1,this._cardInfo.push(n);var c=[];if(3==e.length)return!0;for(var d=3;d<e.length;d++)c.push(e[d]);return this.testThreeCard(c)}return!1}return console.log("\u724c\u7684\u5f20\u6570\u51fa\u9519\uff01"+e.length),!1},s.coutwinAll=function(e){e.sort(function(e,s){return e-s});var s=!1;console.log("\u6392\u5e8f\u540e",e);for(var t=0;t<e.length;t++)for(var r=this.getCardNum(e[t]),i=t+1;i<e.length;i++)if(r==this.getCardNum(e[i])){this._cardInfo=[];var u=new a;if(u._cards.push(e[t]),u._cards.push(e[i]),u._num=2,u._type=0,this._cardInfo.push(u),2==e.len)return!0;for(var o=[],_=0;_<e.length;_++)o.push(e[_]);o.splice(t,1);for(var n=0,c=!1;n<o.length;n++)if(o[n]==e[i]){c=!0;break}if(c){if(o.splice(n,1),this.testThreeCard(o)){this._winCardInfo._wincards.push(this._cardInfo),console.log("\u80e1\u724c\u4fe1\u606f"),console.log(this._cardInfo),s=!0;break}break}}return s},s.coutWin=function(e,s){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);return t.push(s),1==this.coutwinAll(t)},s.ifPeng=function(e,s){this._pengInfo=[],console.log("\u724c\u7684\u957f\u5ea6"+e.length),console.log("\u78b0\u5f97\u724c"+s);for(var t=0;t<e.length;t++){var a=this.getCardNum(s),r=this.getCardNum(e[t]);if(console.log("\u724c\u7684\u6570"+a),r==a){console.log("\u724c\u76f8\u540c"+r);for(var i=t+1;i<e.length;i++){var u=this.getCardNum(e[i]);if(console.log("\u7b2c\u4e8c\u7ae0\u724c\u7684\u6570"+u),u==a)return this._pengInfo.push(e[t]),this._pengInfo.push(e[i]),console.log("\u53ef\u4ee5\u78b0\u7684\u724c"+this._pengInfo),!0}}}return!1},s.getCardType=function(e){var s=e/100;return math.floor(s)},s.ifDingqueCard=function(e){for(var s=0;s<e.length;s++)if(this.getCardType(e[s])==globalMgr.userData._dingque)return!0;return!1},s.ifGangByCard=function(e,s){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);return t.push(s),1==this.ifGang(t)},s.ifGang=function(e){this._gangInfo=[];var s=[];if((s=e).sort(function(e,s){return e-s}),console.log("\u6392\u5e8f\u540e\u7684\u724c"+s),s.length<4)return!1;for(var t=0;t<s.length&&!(t+3>s.length);t++){var r=this.getCardNum(s[t]);if(r==this.getCardNum(s[t+1])&&r==this.getCardNum(s[t+2])&&r==this.getCardNum(s[t+3])){var i=new a;i._cards.push(s[t]),i._cards.push(s[t+1]),i._cards.push(s[t+2]),i._cards.push(s[t+3]),this._gangInfo.push(i)}}return this._gangInfo.length>0&&(console.log("\u6760\u724c\u4fe1\u606f"),console.log(this._gangInfo),!0)},s.getCardNum=function(e){var s=e/10;return Math.floor(s)},s.ifDuiDuiCard=function(e,s){for(var t=0;t<e.length;){var a=this.getCardNum(e[t]);if(a==this.getCardNum(e[t+1]))t+=2;else{if(a!=s)return!1;t+=1}}return this._winType=2,!0},e}();t.default=i,s.exports=t.default,cc._RF.pop()},{}],createRoomPrefab:[function(e,s){"use strict";cc._RF.push(s,"9d574fU2shPeLodxxB6CxZA","createRoomPrefab");var t,a=(t=e("../common/golbleMgr"))&&t.__esModule?t:{default:t};cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.roomData={playerNumber:4,gameNumber:4}},start:function(){},onButtonClicked:function(e,s){switch(s){case"\u5173\u95ed":this.node.destroy();break;case"\u786e\u5b9a":a.default.messageMgr.sendCreateRoomMessage(this.roomData).then(function(e){console.log("\u521b\u5efa\u623f\u95f4\u6210\u529f",e),a.default.userData._roomID=e.roomID,a.default.userData._seatID=0,a.default.user_mgr._userList[0]._id=a.default.userData._id,a.default.user_mgr._userList[0]._name=a.default.userData._nickName,a.default.user_mgr._userList[0]._money=a.default.userData._money,a.default.user_mgr._userList[0]._seatID=a.default.userData._seatID,a.default.user_mgr._userList[0]._ready=!1,a.default.mainScene.emit("\u8fdb\u5165\u6e38\u620f\u754c\u9762",null)}).catch(function(){console.log("\u521b\u5efa\u623f\u95f4\u5931\u8d25")}),this.node.destroy()}}}),cc._RF.pop()},{"../common/golbleMgr":"golbleMgr"}],golbleMgr:[function(e,s,t){"use strict";cc._RF.push(s,"4a2b6gZogJHwYGvIKnglOfN","golbleMgr"),t.__esModule=!0,t.default=void 0;var a=o(e("../network/meessageMgr")),r=o(e("./SoundMgr")),i=o(e("./userData")),u=o(e("./userMgr"));function o(e){return e&&e.__esModule?e:{default:e}}var _={messageMgr:a.default.getInstance(),userData:i.default.getInstance(),mainScene:void 0,user_mgr:u.default.getInstance(),soundMgr:r.default.getInstance()};t.default=_,s.exports=t.default,cc._RF.pop()},{"../network/meessageMgr":"meessageMgr","./SoundMgr":"SoundMgr","./userData":"userData","./userMgr":"userMgr"}],hallNodePrefab:[function(e,s){"use strict";cc._RF.push(s,"660f4Z4LWVNfqRXfxst3FiR","hallNodePrefab");var t=a(e("../common/golbleMgr"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("../common/userMgr")),cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,nickName:cc.Label,houseCardCount:cc.Label,createRoomPrefab:cc.Prefab},onLoad:function(){this.init()},start:function(){},init:function(){this.idLabel.string="ID:"+t.default.userData._id,this.nickName.string=t.default.userData._nickName,this.houseCardCount.string=t.default.userData._houserCardCount},onButtonClick:function(e,s){switch(s){case"\u521b\u5efa":console.log("\u521b\u5efa\u623f\u95f4\u6309\u94ae\u70b9\u51fb\u4e86");var a=cc.instantiate(this.createRoomPrefab);this.node.addChild(a);break;case"\u52a0\u5165":console.log("\u52a0\u5165\u623f\u95f4\u6309\u94ae\u70b9\u51fb\u4e86"),t.default.messageMgr.sendEnterRoomMessage(t.default.userData._id).then(function(e){console.log("\u52a0\u5165\u623f\u95f4\u6210\u529f",e),t.default.userData._roomID=e.roomID,t.default.mainScene.emit("\u8fdb\u5165\u6e38\u620f\u754c\u9762",null)}).catch(function(e){console.log("\u51fa\u9519:"+e)})}}}),cc._RF.pop()},{"../common/golbleMgr":"golbleMgr","../common/userMgr":"userMgr"}],loginPrefab:[function(e,s){"use strict";cc._RF.push(s,"18007td7c9J+Ie4tCVzK2/m","loginPrefab");var t,a=(t=e("../common/golbleMgr"))&&t.__esModule?t:{default:t};cc.Class({extends:cc.Component,properties:{backmusic:cc.AudioClip,btnclick:cc.AudioClip},LoadSound:function(){cc.loader.loadResDir("sounds",cc.AudioClip,function(e,s){this._clips=s,console.log("load clips:",this._clips),e&&console.log("err:",e);for(var t=0;t<s.length;t++){var r={_name:s[t]._name,_clip:s[t]};a.default.soundMgr._soundList.push(r)}console.log("\u52a0\u8f7d\u6210\u529f"),console.log(a.default.soundMgr._soundList)})},onLoad:function(){console.log("\u52a0\u8f7d\u58f0\u97f3"),this.LoadSound()},start:function(){cc.audioEngine.play(this.backmusic,!0,1)},onButtonClicket:function(e,s){var t=this;switch(console.log("\u70b9\u51fb\u7684\u6309\u94ae\u662f",s),s){case"\u6e38\u5ba2\u767b\u9646":console.log("\u6e38\u5ba2\u767b\u9646\u6309\u94ae\u88ab\u70b9\u51fb\u4e86");break;case"\u5fae\u4fe1\u767b\u9646":console.log("\u5fae\u4fe1\u767b\u9646\u6309\u94ae\u88ab\u70b9\u51fb\u4e86"),a.default.soundMgr.playMusicEX("bgFight");break;case"\u6d4b\u8bd51\u767b\u9646":a.default.messageMgr.sendLoginMessage(10001).then(function(e){console.log("promise\u56de\u8c03\u56de\u6765\u7684\u53c2\u6570\u662f:",e),a.default.userData._id=e.id,a.default.userData._nickName=e.nickName,a.default.userData._houserCardCount=e.houseCardCount,a.default.userData._money=e._money,t.node.parent.emit("\u8fdb\u5165\u5927\u5385\u754c\u9762",null),cc.audioEngine.play(t.btnclick,!1,1)}).catch(function(){console.log("\u51fa\u73b0\u9519\u8bef")});break;case"\u6d4b\u8bd52\u767b\u9646":a.default.messageMgr.sendLoginMessage(10002).then(function(e){console.log("promise\u56de\u8c03\u56de\u6765\u7684\u53c2\u6570\u662f:",e),a.default.userData._id=e.id,a.default.userData._nickName=e.nickName,a.default.userData._houserCardCount=e.houseCardCount,a.default.userData._money=e._money,t.node.parent.emit("\u8fdb\u5165\u5927\u5385\u754c\u9762",null),cc.audioEngine.play(t.btnclick,!1,1)}).catch(function(){console.log("\u51fa\u73b0\u9519\u8bef")});break;case"\u6d4b\u8bd53\u767b\u9646":a.default.messageMgr.sendLoginMessage(10003).then(function(e){console.log("promise\u56de\u8c03\u56de\u6765\u7684\u53c2\u6570\u662f:",e),a.default.userData._id=e.id,a.default.userData._nickName=e.nickName,a.default.userData._houserCardCount=e.houseCardCount,a.default.userData._money=e._money,t.node.parent.emit("\u8fdb\u5165\u5927\u5385\u754c\u9762",null),cc.audioEngine.play(t.btnclick,!1,1)}).catch(function(){console.log("\u51fa\u73b0\u9519\u8bef")});break;case"\u6d4b\u8bd54\u767b\u9646":a.default.messageMgr.sendLoginMessage(10004).then(function(e){console.log("promise\u56de\u8c03\u56de\u6765\u7684\u53c2\u6570\u662f:",e),a.default.userData._id=e.id,a.default.userData._nickName=e.nickName,a.default.userData._houserCardCount=e.houseCardCount,a.default.userData._money=e._money,t.node.parent.emit("\u8fdb\u5165\u5927\u5385\u754c\u9762",null),cc.audioEngine.play(t.btnclick,!1,1)}).catch(function(){console.log("\u51fa\u73b0\u9519\u8bef")})}},update:function(){a.default.soundMgr.updateMusic()}}),cc._RF.pop()},{"../common/golbleMgr":"golbleMgr"}],main:[function(e,s){"use strict";cc._RF.push(s,"ff0d2jUz51FMZpuNd9L6QRU","main");var t,a=(t=e("./common/golbleMgr"))&&t.__esModule?t:{default:t};cc.Class({extends:cc.Component,properties:{loginPrefab:cc.Prefab,hallPrefab:cc.Prefab,gamePrefab:cc.Prefab},onLoad:function(){var e=this;this.node.on("\u8fdb\u5165\u5927\u5385\u754c\u9762",function(){e.inistaceNode(e.hallPrefab)}),this.node.on("\u8fdb\u5165\u6e38\u620f\u754c\u9762",function(){e.inistaceNode(e.gamePrefab)}),this.inistaceNode(this.loginPrefab),a.default.messageMgr.connectServer().then(function(){console.log("\u7f51\u7edc\u8fde\u63a5\u6210\u529f")}).catch(function(){console.log("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25")}),a.default.mainScene=this.node},inistaceNode:function(e){this.currentNode&&this.currentNode.destroy();var s=cc.instantiate(e);this.currentNode=s,this.node.addChild(s)},start:function(){}}),cc._RF.pop()},{"./common/golbleMgr":"golbleMgr"}],meessageMgr:[function(e,s,t){"use strict";cc._RF.push(s,"eba950TpetAs5IMdMnENOXQ","meessageMgr"),t.__esModule=!0,t.default=void 0;var a=function(){function e(){this._ws=void 0,this._callBackMap={},this._msgList=[]}e.getInstance=function(){return e.instance?e.instance:(e.instance=new e,e.instance)};var s=e.prototype;return s.connectServer=function(){var e=this,s=this;return new Promise(function(t,a){var r=new WebSocket("ws://43.136.61.107:3001");r.onopen=function(){console.log("\u4e0e\u670d\u52a1\u7aef\u8fde\u63a5\u6210\u529f"),t()},r.onmessage=function(e){var t=JSON.parse(e.data),a=t.type,r=t.data;switch("xuan_pai_time"!=a&&console.log("\u89e3\u6790\u7684\u6570\u636e\u662f",t),s.rspMessage(a,r),a){case"get_userInfo":case"sai_zi":case"zhuang_jia":case"xuan_que":case"deal_card":case"ding_que":case"xuan_pai":case"ding_que_time":case"xuan_pai_time":case"out_card":case"send_card":case"wait_player_check":case"peng_pai":case"gang_pai":case"hu_pai":case"show_last_cards":var i={_type:a,_msg:r};s._msgList.push(i)}},r.onclose=function(){console.log("\u4e0e\u670d\u52a1\u7aef\u65ad\u5f00\u8fde\u63a5")},r.onerror=function(){console.log("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25"),a()},e._ws=r})},s.removeMessage=function(e){console.log("\u79fb\u9664\u4fe1\u606f:"+e);for(var s=0;s<this._msgList.length;s++)if(this._msgList[s]._type==e)return void this._msgList.splice(s,1)},s.rspMessage=function(e,s){var t=this._callBackMap[e];t?(t(s),console.log("\u5904\u7406\u4fe1\u606f:"+e)):"xuan_pai_time"==e||"ding_que_time"==e||console.log("\u6536\u5230\u672a\u5904\u7406\u4fe1\u606f:"+e)},s.sendReadMessagey=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("player_ready",e,function(e){e.err?a(e.err):t(e)})})},s.sendHuPaiMessage=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("hu_pai",e,function(e){e.err?a(e.err):t(e)})})},s.sendPengPaiMessage=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("peng_pai",e,function(e){e.err?a(e.err):t(e)})})},s.sendGangPaiMessage=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("gang_pai",e,function(e){e.err?a(e.err):t(e)})})},s.sendChipaiMessagey=function(){var e=this;return new Promise(function(s,t){e.sendMessage("chi_pai",id,function(e){e.err?t(e.err):s(e)})})},s.sendLoginMessage=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("login",e,function(e){e.err?a(e.err):t(e)})})},s.sendDingqueMessage=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("ding_que",e,function(e){e.err?a(e.err):t(e)})})},s.sendEnterRoomMessage=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("enter_room",e,function(e){e.err?a(e.err):t(e)})})},s.sendOutCardMessage=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("out_card",e,function(e){e.err?a(e.err):t(e)})})},s.sendCreateRoomMessage=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("create_room",e,function(e){e.err?a(e.err):t(e)})})},s.sendGetRoomInfoMessage=function(e){var s=this;return new Promise(function(t,a){s.sendMessage("get_userInfo",e,function(e){e.err?a(e.err):t(e)})})},s.sendMessage=function(e,s,t){var a={type:e,data:s};this._callBackMap[e]=t,this._ws.send(JSON.stringify(a))},e}();t.default=a,s.exports=t.default,cc._RF.pop()},{}],userData:[function(e,s,t){"use strict";cc._RF.push(s,"1545cY74udFlbrWZFbRDwJQ","userData"),t.__esModule=!0,t.default=void 0;var a=function(){function e(){this._id=void 0,this._nickName=void 0,this._houserCardCount=void 0,this._money=0,this._roomID=0,this._seatID=-1,this._ready=!1,this._dingque=0}return e.getInstance=function(){return e.instance?e.instance:(e.instance=new e,e.instance)},e}();t.default=a,s.exports=t.default,cc._RF.pop()},{}],userMgr:[function(e,s,t){"use strict";cc._RF.push(s,"f867b/vNJ5K+JbF0YQaAfPm","userMgr"),t.__esModule=!0,t.default=void 0;var a=i(e("./coutCard")),r=i(e("./golbleMgr"));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){this._cards=[],this._num=[],this._type=[]}return e.prototype.reSet=function(){this._cards=[],this._num=[],this._type=[]},e}(),o=function(){this._id=0,this._name="",this._gold=0,this._seatID=-1,this._ready=!1,this._cards=[],this._dingque=0,this._outcards=0,this._showcards=[],this._showCardInfo=void 0},_=function(){function e(){this._ifSelectGang=!1,this.cardResult=new a.default,this._userList=[],this._zhuang=-1,this._status=void 0;for(var e=0;e<4;e++){var s=new o,t=new u;s._showCardInfo=t,this._userList.push(s)}this._statusList=[],this._curxuanpai_seatID=-1,this._curOutCard_seatID=-1,this._updateShowCard=!1,this._IfChupai=!1,this._ifChipai=!1,this._IfSelectGangpai=!1,this._IfoutCardtishi=!1,this._IfShowGangpaitishi=!1,this._CountInfo=[]}e.getInstance=function(){return e.instance?e.instance:(e.instance=new e,e.instance)};var s=e.prototype;return s.getdingqueBySeat=function(e){for(var s=0;s<this._userList.length;s++)if(this._userList[s]._seatID==e)return this._userList[s]._dingque;return console.log("\u83b7\u5f97\u5b9a\u7f3a\u4fe1\u606f\u5931\u8d25\uff01"+e),-1},s.getUserCardBySeat=function(e){for(var s=[],t=0;t<this._userList.length;t++)if(this._userList[t]._seatID==e)return this._userList[t]._cards;return console.log("\u6839\u636e\u73a9\u5bb6\u5ea7\u4f4d\u83b7\u5f97\u624b\u724c\u5931\u8d25"),s},s.getUserIdx=function(){var e=r.default.userData._seatID;console.log("userID"+e+"\u73a9\u5bb6\u6570\u91cf"+this._userList.length);for(var s=0;s<this._userList.length;s++)if(this._userList[s]._seatID==e)return s;return-1},s.SortPlayerCard=function(){for(var e=0;e<this._userList.length;e++)console.log("\u5f00\u59cb\u6392\u5e8f:"+this._userList[e]._cards),this._userList[e]._cards.sort(function(e,s){return s-e}),console.log("\u7ed3\u675f\u6392\u5e8f:"+this._userList[e]._cards)},s.Delcard=function(e,s,t){console.log("\u5220\u9664\u73a9\u5bb6\u624b\u724c"+e+s),console.log("\u5220\u9664\u73a9\u5bb6\u624b\u724c\u6570\u91cf"+t);var a=!1;if(console.log("\u81ea\u5df1\u4f4d\u7f6e"+r.default.userData._seatID+"\u5220\u9664\u724c\u4f4d\u7f6e"+e),e==r.default.userData._seatID){for(var i=0,u=0;u<this._userList.length;u++)if(this._userList[u]._seatID==e){if(this._userList[u]._seatID==r.default.userData._seatID)for(;i<this._userList[u]._cards.length;i++)if(this._userList[u]._cards[i]==s){a=!0,console.log("\u627e\u5230\u8fd9\u5f20\u624b\u724c"+s);break}1==a&&(console.log("\u5220\u9664\u73a9\u5bb6\u724c\u7684\u4fe1\u606f"+this._userList[u]._cards[i]),this._userList[u]._cards.splice(i,1));break}}else for(var o=0;o<r.default.user_mgr._userList.length;o++)if(r.default.user_mgr._userList[o]._seatID==e){r.default.user_mgr._userList[o]._cards=[];for(var _=0;_<t;_++)r.default.user_mgr._userList[o]._cards.push(0);return void console.log("\u5220\u9664\u540e\u624b\u724c\u957f\u5ea6"+r.default.user_mgr._userList[o]._cards.length)}},s.getCardName=function(e){var s=e/100;switch(s=Math.floor(s)){case 0:return"M_bamboo_";case 1:return"M_character_";case 2:return"M_dot_"}return""},s.getMajiangPath=function(){return"textures/MJ/my/Z_my"},s.loadImg=function(e,s,t){cc.loader.loadRes(s,cc.SpriteAtlas,function(s,a){e.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame(t)})},s.getCardInfo=function(e){var s=e/10;return Math.floor(s)},s.getCardNum=function(e){var s=e/10;return s%=10,Math.floor(s)},s.random_int=function(e,s){var t=e+(s-e)*Math.random();return Math.floor(t)},s.outCard=function(e){for(var s=r.default.userData._seatID,t=0;t<this._userList.length;t++)if(this._userList[t]._seatID==s){var a={seatID:s,card:this._userList[t]._cards[e],num:this._userList[t]._cards.length};r.default.messageMgr.sendOutCardMessage(a);break}},s.testHandShowCard=function(){this._userList[1]._cards=[],this._userList[2]._cards=[],this._userList[3]._cards=[],this._userList[1]._cards.push(231),this._userList[1]._cards.push(241),this._userList[1]._cards.push(251),this._userList[1]._cards.push(261),this._userList[1]._cards.push(262),this._userList[2]._cards.push(131),this._userList[2]._cards.push(141),this._userList[2]._cards.push(151),this._userList[2]._cards.push(161),this._userList[2]._cards.push(162),this._userList[3]._cards.push(31),this._userList[3]._cards.push(41),this._userList[3]._cards.push(51),this._userList[3]._cards.push(61),this._userList[3]._cards.push(62)},s.testCard=function(){for(var e=0;e<this._userList.length;e++){var s=2;this._userList[e]._seatID=e,this._userList[e]._showCardInfo._cards.push(210),this._userList[e]._showCardInfo._num.push(4),this._userList[e]._showCardInfo._type.push(s),s=1,this._userList[e]._showCardInfo._cards.push(121),this._userList[e]._showCardInfo._num.push(4),this._userList[e]._showCardInfo._type.push(s)}this._curOutCard_seatID=3,this._updateShowCard=!0,this._userList[0]._cards.push(231),this._userList[0]._cards.push(241),this._userList[0]._cards.push(251),this._userList[0]._cards.push(261),this._userList[0]._cards.push(262),this._userList[1]._cards.push(231),this._userList[1]._cards.push(241),this._userList[1]._cards.push(251),this._userList[1]._cards.push(261),this._userList[1]._cards.push(262),this._userList[2]._cards.push(231),this._userList[2]._cards.push(241),this._userList[2]._cards.push(251),this._userList[2]._cards.push(261),this._userList[2]._cards.push(262),this._userList[3]._cards.push(231),this._userList[3]._cards.push(241),this._userList[3]._cards.push(251),this._userList[3]._cards.push(261),this._userList[3]._cards.push(262);for(var t=1;t<this._userList.length;t++){this._userList[t]._cards=[];for(var a=0;a<8;a++)this._userList[t]._cards.push(0)}this._statusList.push("update_all_cards")},s.testSameCardNum=function(e,s){for(var t=this.getUserCardBySeat(e),a=0,r=0;r<s.length;r++)for(var i=0;i<t.length;i++)if(s[r]==t[i]){a++;break}return a},s.eatCard=function(e){if(console.log("eatCard\u4fe1\u606f"),console.log(e),this._curOutCard_seatID=e._seatID,e._seatID==r.default.userData._seatID){for(var s=0;s<this._userList.length;s++)if(this._userList[s]._seatID==e._seatID){for(var t=0;t<e._cards.length;t++){for(var a=0,i=!1;a<this._userList[s]._cards.length;a++)if(this._userList[s]._cards[a]==e._cards[t]){i=!0;break}1==i&&this._userList[s]._cards.splice(a,1)}console.log("\u5220\u9664\u6760\u724c\u540e\u624b\u724c:"),console.log(this._userList[s]._cards)}}else{console.log("\u5904\u7406\u4e0d\u662f\u73a9\u5bb6\u81ea\u5df1\u7684\u624b\u724c");for(var u=0;u<this._userList.length;u++)if(this._userList[u]._seatID==e._seatID){this._userList[u]._cards=[];for(var o=0;o<e.num;o++)this._userList[u]._cards.push(0);break}}if(this._statusList.push("update_all_cards"),1==e._sameNum){console.log("\u73a9\u5bb6\u6760\u81ea\u5df1\u53e6\u59163\u5f20\u724c"+e._cards[0]);for(var _=0;_<this._userList.length;_++)if(this._userList[_]._seatID==e._seatID){for(var n=0;n<this._userList[_]._showCardInfo._cards.length;n++)this._userList[_]._showCardInfo._cards[n]==e._cards[0]&&this._userList[_]._showCardInfo._name[n]++;this._updateShowCard=!0;break}}else for(var c=0;c<this._userList.length;c++)if(this._userList[c]._seatID==e._seatID){this._userList[c]._showCardInfo._cards.push(e._cards[0]),this._userList[c]._showCardInfo._num.push(e._cards.length),this._userList[c]._showCardInfo._type.push(e._type),this._updateShowCard=!0;break}},s.countScoreInfo=function(){var e=this.getUserCardBySeat(r.default.userData._seatID),s=0,t="\n";e.length%2==0?(t+="\u81ea\u6478    \uff082\u756a\uff09\n",s=2):(t+="\u5e73\u80e1    \uff081\u756a\uff09\n",s=1);for(var a=void 0,i=0;i<this._userList.length;i++)this._userList[i]._seatID==r.default.userData._seatID&&(a=this._userList[i]._showCardInfo);for(var u=0;u<a._type.length;u++)2==a._type[u]?(t+="\u4e0b\u96e8    (4\u756a)\n",s*=4):1==a._type[u]&&(t+="\u522e\u98ce    (2\u756a)\n",s*=2);var o=e[0]/100;o=Math.floor(o);for(var _=!1,n=1;n<e.length;n++){var c=e[n]/100;if((c=Math.floor(c))!=o){_=!0;break}}for(var d=0;d<a._cards.length;d++){var l=a._cards[d]/100;if((l=Math.floor(l))!=o){_=!0;break}}if(0==_&&(t+="\u6e05\u4e00\u8272    \uff082\u756a\uff09\n",s*=2),14==e.length){for(var g=!0,h=0;h<e.length/2;){var f=e[h]/10;if(f=Math.floor(f),e[h+1],f!=Math.floor(f)){g=!1;break}h+=2}1==g&&(t+="\u4e03\u5bf9    \uff082\u756a\uff09\n",s*=2)}return{_score:s,_info:t}},s.coutPlayerCard=function(){var e={bwin:!1,bgang:!1,bpeng:!1,bpass:!1},s=this.getUserCardBySeat(r.default.userData._seatID);return 1==this.cardResult.coutwinAll(s)&&(e.bwin=!0,e.bpass=!0),1==this.cardResult.ifGang(s)&&(e.bgang=!0,e.bpass=!0),console.log("\u8ba1\u7b97\u81ea\u5df1\u624b\u724c\u73a9\u5bb6:"+r.default.userData._seatID),console.log(e),e},s.countOtherCard=function(e){for(var s={bwin:!1,bgang:!1,bpeng:!1,bpass:!1},t=[],a=this.getUserCardBySeat(r.default.userData._seatID),i=0;i<a.length;i++)t.push(a[i]);return t.push(e),1==this.cardResult.coutwinAll(t)&&(s.bwin=!0,s.bpass=!0),1==this.cardResult.ifGang(t)&&(s.bgang=!0,s.bpass=!0),this.cardResult.ifPeng(a,e)&&(s.bpeng=!0,s.bpass=!0),console.log("\u8ba1\u7b97\u5f53\u524d\u73a9\u5bb6:"+r.default.userData._seatID+"\u5bf9\u65b9\u53d1\u724c\uff1a"+e),console.log(s),s},s.getUserCard=function(){for(var e=0;e<this._userList.length;e++)if(this._userList[e]._seatID==r.default.userData._seatID)return this._userList[e]._cards;return[]},s.getSeatByID=function(e){var s=r.default.userData._seatID+e;return s>=4&&(s-=4),s},s.getUserInfo=function(e){return this._userList[e]},e}();t.default=_,s.exports=t.default,cc._RF.pop()},{"./coutCard":"coutCard","./golbleMgr":"golbleMgr"}]},{},["SoundMgr","coutCard","golbleMgr","userData","userMgr","GameRoom","MajiangMgr","ShowCardMgr","UserInfo","createRoomPrefab","hallNodePrefab","loginPrefab","main","meessageMgr"]);